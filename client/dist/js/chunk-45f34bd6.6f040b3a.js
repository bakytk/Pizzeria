(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45f34bd6"],{1071:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("p"),t.alert.show?a("b-alert",{attrs:{show:"",variant:"primary"}},[t._v(" "+t._s(t.alert.msg)+" ")]):t._e(),a("p"),t.toggler.general?a("b-form",{ref:"Form",on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)},reset:t.onReset}},[a("b-form-group",{staticClass:"col-md-7",attrs:{label:"Шаг 1: ","label-cols-md":"2",description:"Выберите предмет изменения"}},[a("b-form-select",{staticClass:"form-input",attrs:{options:t.objectOptions,required:""},model:{value:t.payload.target.object,callback:function(e){t.$set(t.payload.target,"object",e)},expression:"payload.target.object"}})],1),a("b-form-group",{staticClass:"col-md-7",attrs:{label:"","label-cols-md":"2",description:"Выберите действие"}},[a("b-form-select",{staticClass:"form-input",attrs:{options:t.actionOptions,required:""},model:{value:t.payload.target.action,callback:function(e){t.$set(t.payload.target,"action",e)},expression:"payload.target.action"}})],1),t.toggler.nextStep.cat.add?a("b-form-group",{staticClass:"col-md-7",attrs:{label:"Шаг 2: ","label-cols-md":"2",description:"Введите название новой категории"}},[a("b-form-input",{staticClass:"form-input",attrs:{type:"text",required:""},model:{value:t.payload.add.category.name,callback:function(e){t.$set(t.payload.add.category,"name",e)},expression:"payload.add.category.name"}})],1):t._e(),t.toggler.nextStep.cat.add?a("b-form-group",{staticClass:"col-md-7",attrs:{label:"","label-cols-md":"2",description:"Ранг категории в списке: введите целое число"}},[a("b-form-input",{staticClass:"form-input",attrs:{type:"number",min:"1",required:""},model:{value:t.payload.add.category.rank,callback:function(e){t.$set(t.payload.add.category,"rank",e)},expression:"payload.add.category.rank"}})],1):t._e(),t.toggler.nextStep.cat.chg.step2?a("b-form-group",{staticClass:"col-md-7",attrs:{label:"Шаг 2: ","label-cols-md":"2",description:"Выберите категорию для редактирования"}},[a("b-form-radio-group",{staticClass:"form-input",attrs:{options:t.catNames,required:""},model:{value:t.payload.chg.category.name,callback:function(e){t.$set(t.payload.chg.category,"name",e)},expression:"payload.chg.category.name"}})],1):t._e(),t.toggler.nextStep.cat.chg.step2?a("b-form-group",{staticClass:"col-md-7",attrs:{label:"","label-cols-md":"2",description:"Выберите атрибут редактирования"}},[a("b-form-radio-group",{staticClass:"form-input",attrs:{options:t.catAttributes,required:""},model:{value:t.payload.chg.category.attribute,callback:function(e){t.$set(t.payload.chg.category,"attribute",e)},expression:"payload.chg.category.attribute"}})],1):t._e(),t.toggler.nextStep.cat.chg.rank?a("b-form-group",{staticClass:"col-md-7",attrs:{label:"","label-cols-md":"2",description:"Введите новое значение"}},[a("b-form-input",{staticClass:"form-input",attrs:{type:"number",min:"1",required:""},model:{value:t.payload.chg.category.newValue,callback:function(e){t.$set(t.payload.chg.category,"newValue",e)},expression:"payload.chg.category.newValue"}})],1):t._e(),t.toggler.nextStep.cat.chg.name?a("b-form-group",{staticClass:"col-md-7",attrs:{label:"","label-cols-md":"2",description:"Введите новое значение"}},[a("b-form-input",{staticClass:"form-input",attrs:{type:"text",required:""},model:{value:t.payload.chg.category.newValue,callback:function(e){t.$set(t.payload.chg.category,"newValue",e)},expression:"payload.chg.category.newValue"}})],1):t._e(),t.toggler.nextStep.cat.del?a("b-form-group",{staticClass:"col-md-7",attrs:{label:"Шаг 2: ","label-cols-md":"2",description:"Выберите категорию для удаления"}},[a("b-form-radio-group",{staticClass:"form-input",attrs:{options:t.catNames,required:""},model:{value:t.payload.del.category.name,callback:function(e){t.$set(t.payload.del.category,"name",e)},expression:"payload.del.category.name"}})],1):t._e(),t.toggler.nextStep.item.add?a("b-form-group",{staticClass:"col-md-7",attrs:{label:"Шаг 2: ","label-cols-md":"2",description:"Выберите категорию, в которую добавляем товар"}},[a("b-form-radio-group",{staticClass:"form-input",attrs:{options:t.catNames,required:""},model:{value:t.payload.add.item.cat,callback:function(e){t.$set(t.payload.add.item,"cat",e)},expression:"payload.add.item.cat"}})],1):t._e(),t.toggler.nextStep.item.add?a("b-form-group",{staticClass:"col-md-7",attrs:{label:"","label-cols-md":"2",description:"Название, добавляемого товара"}},[a("b-form-input",{staticClass:"form-input",attrs:{type:"text",required:""},model:{value:t.payload.add.item.title,callback:function(e){t.$set(t.payload.add.item,"title",e)},expression:"payload.add.item.title"}})],1):t._e(),t.toggler.nextStep.item.add?a("b-form-group",{staticClass:"col-md-7",attrs:{label:"","label-cols-md":"2",description:"Описание нового товара"}},[a("b-form-input",{staticClass:"form-input",attrs:{type:"text",required:""},model:{value:t.payload.add.item.des,callback:function(e){t.$set(t.payload.add.item,"des",e)},expression:"payload.add.item.des"}})],1):t._e(),t.toggler.nextStep.item.add?a("b-form-group",{staticClass:"col-md-7",attrs:{label:"","label-cols-md":"2",description:"Цена товара: введите целое число без точек, запятых и других знаков препинания"}},[a("b-form-input",{staticClass:"form-input",attrs:{type:"text",required:""},model:{value:t.payload.add.item.price,callback:function(e){t.$set(t.payload.add.item,"price",e)},expression:"payload.add.item.price"}})],1):t._e(),t.toggler.nextStep.item.add?a("b-form-group",{staticClass:"col-md-7",attrs:{label:"","label-cols-md":"2"}},[a("b-form-file",{staticClass:"mt-3",attrs:{"browse-text":"Выбрать",placeholder:"Выберите фото: .jpg, .png, .gif, .jpeg, .bmp, .svf",accept:".jpg, .png, .gif, .jpeg, .bmp, .svf",required:""},model:{value:t.photo,callback:function(e){t.photo=e},expression:"photo"}})],1):t._e(),t.toggler.nextStep.item.chg.step2?a("b-form-group",{staticClass:"col-md-7",attrs:{label:"Шаг 2: ","label-cols-md":"2",description:"Выберите категорию, в которой редактируется товар"}},[a("b-form-radio-group",{staticClass:"form-input",attrs:{options:t.catNames,required:""},model:{value:t.payload.chg.item.cat,callback:function(e){t.$set(t.payload.chg.item,"cat",e)},expression:"payload.chg.item.cat"}})],1):t._e(),t.toggler.nextStep.item.chg.step3?a("b-form-group",{staticClass:"col-md-7",attrs:{label:"Шаг 3:","label-cols-md":"2",description:"Товар, атрибут которого редактируется"}},[a("b-form-radio-group",{staticClass:"form-input",attrs:{options:t.itemNames,required:""},model:{value:t.payload.chg.item.title,callback:function(e){t.$set(t.payload.chg.item,"title",e)},expression:"payload.chg.item.title"}})],1):t._e(),t.toggler.nextStep.item.chg.step3?a("b-form-group",{staticClass:"col-md-7",attrs:{label:"","label-cols-md":"2",description:"Выберите изменяемый атрибут товара"}},[a("b-form-radio-group",{staticClass:"form-input",attrs:{options:t.itemAttributes,required:""},model:{value:t.payload.chg.item.attribute,callback:function(e){t.$set(t.payload.chg.item,"attribute",e)},expression:"payload.chg.item.attribute"}})],1):t._e(),t.toggler.nextStep.item.chg.txt?a("b-form-group",{staticClass:"col-md-7",attrs:{label:"","label-cols-md":"2",description:"Введите новое значение атрибута"}},[a("b-form-input",{staticClass:"form-input",attrs:{type:"text",required:""},model:{value:t.payload.chg.item.newValue,callback:function(e){t.$set(t.payload.chg.item,"newValue",e)},expression:"payload.chg.item.newValue"}})],1):t._e(),t.toggler.nextStep.item.chg.img?a("b-form-group",{staticClass:"col-md-7",attrs:{label:"","label-cols-md":"2"}},[a("b-form-file",{staticClass:"mt-3",attrs:{"browse-text":"Выбрать",placeholder:"Выберите фото: .jpg, .png, .gif, .jpeg, .bmp, .svf",accept:".jpg, .png, .gif, .jpeg, .bmp, .svf",required:""},model:{value:t.photo,callback:function(e){t.photo=e},expression:"photo"}})],1):t._e(),t.toggler.nextStep.item.del.step2?a("b-form-group",{staticClass:"col-md-7",attrs:{label:"Шаг 2: ","label-cols-md":"2",description:"Выберите категорию, из которой удаляется товар"}},[a("b-form-radio-group",{staticClass:"form-input",attrs:{options:t.catNames,required:""},model:{value:t.payload.del.item.cat,callback:function(e){t.$set(t.payload.del.item,"cat",e)},expression:"payload.del.item.cat"}})],1):t._e(),t.toggler.nextStep.item.del.step3?a("b-form-group",{staticClass:"col-md-7",attrs:{label:"Шаг 3: ","label-cols-md":"2",description:"Выберите удаляемый товар"}},[a("b-form-radio-group",{staticClass:"form-input",attrs:{options:t.itemNames,required:""},model:{value:t.payload.del.item.title,callback:function(e){t.$set(t.payload.del.item,"title",e)},expression:"payload.del.item.title"}})],1):t._e(),a("br"),a("p",[a("b-button",{attrs:{type:"submit",variant:"info"}},[t._v(" Продолжить ")]),a("b-button",{attrs:{type:"reset",variant:"danger"}},[t._v(" Очистить ")])],1),a("br")],1):t._e()],1)},l=[],s=a("2f62");function i(){return{alert:{show:!1,msg:""},photo:null,toggler:{general:!0,nextStep:{item:{add:!1,chg:{step2:!1,step3:!1,txt:!1,img:!1},del:{step2:!1,step3:!1}},cat:{add:!1,chg:{step2:!1,name:!1,rank:!1},del:!1}},lastStep:!1},payload:{target:{object:"",action:""},add:{category:{name:"",rank:""},item:{title:"",cat:"",des:"",price:""}},chg:{category:{name:"",attribute:"",newValue:""},item:{cat:"",title:"",attribute:"",newValue:""}},del:{category:{name:""},item:{title:"",cat:""}}},catAttributes:[{value:"name",text:"Название"},{value:"rank",text:"Ранг"}],itemAttributes:[{value:"title",text:"Название"},{value:"des",text:"Описание"},{value:"price",text:"Цена"},{value:"img",text:"Фото"}],objectOptions:[{value:"category",text:"Категория"},{value:"item",text:"Товар",disabled:!1}],actionOptions:[{value:"add",text:"Добавить"},{value:"chg",text:"Изменить"},{value:"del",text:"Удалить"}]}}var r={data(){return i()},computed:{...Object(s["c"])(["itemLists","catNames","itemNames"])},methods:{onSubmit(){if(this.toggler.lastStep){const t={headers:{Authorization:this.$cookies.get("bothubco"),"Content-Type":"multipart/form-data"}},e=this.payload.target.object,a=this.payload.target.action,o=new FormData;o.append("object",e),o.append("action",a),o.append("update",JSON.stringify(this.payload[a][e])),o.append("img",this.photo),this.$axios.post("/edit",o,t).then(t=>{Object.assign(this.$data,i()),this.alert.msg=t.data.message,this.alert.show=!0}).catch((function(t){console.log(t)}))}else if(""===this.payload.target.object)this.alert.msg="Выберите предмет изменений",this.alert.show=!0;else if(""===this.payload.target.action)this.alert.msg="Выберите действие",this.alert.show=!0;else if("category"===this.payload.target.object&&"add"===this.payload.target.action)this.toggler.lastStep=!0,this.toggler.nextStep.cat.add=!0;else if("category"===this.payload.target.object&&"del"===this.payload.target.action)this.toggler.lastStep=!0,this.toggler.nextStep.cat.del=!0;else if("category"===this.payload.target.object&&"chg"===this.payload.target.action)this.toggler.nextStep.cat.chg.step2=!0,"name"===this.payload.chg.category.attribute?(this.toggler.nextStep.cat.chg.name=!0,this.toggler.lastStep=!0):"rank"===this.payload.chg.category.attribute&&(this.toggler.nextStep.cat.chg.rank=!0,this.toggler.lastStep=!0);else if("item"===this.payload.target.object&&"add"===this.payload.target.action)this.toggler.lastStep=!0,this.toggler.nextStep.item.add=!0;else if("item"===this.payload.target.object&&"chg"===this.payload.target.action)if(this.toggler.nextStep.item.chg.step2=!0,""===this.payload.chg.item.cat)this.alert.msg="Выберите категорию",this.alert.show=!0;else{this.alert.msg="",this.alert.false=!0;var t=this.payload.chg.item.cat;this.$store.dispatch("setItems",t),this.toggler.nextStep.item.chg.step3=!0,"title"===this.payload.chg.item.attribute||"des"===this.payload.chg.item.attribute||"price"===this.payload.chg.item.attribute?(this.toggler.nextStep.item.chg.txt=!0,this.toggler.lastStep=!0):"img"===this.payload.chg.item.attribute&&(this.toggler.nextStep.item.chg.img=!0,this.toggler.lastStep=!0)}else if("item"===this.payload.target.object&&"del"===this.payload.target.action)if(this.toggler.nextStep.item.del.step2=!0,""===this.payload.del.item.cat)this.alert.msg="Выберите категорию",this.alert.show=!0;else{this.alert.msg="",this.alert.false=!0;t=this.payload.del.item.cat;this.$store.dispatch("setItems",t),this.toggler.nextStep.item.del.step3=!0,this.toggler.lastStep=!0}},onReset(){Object.assign(this.$data,i())}}},c=r,p=(a("637f"),a("2877")),d=Object(p["a"])(c,o,l,!1,null,"4e502670",null);e["default"]=d.exports},"637f":function(t,e,a){"use strict";var o=a("8ee7"),l=a.n(o);l.a},"8ee7":function(t,e,a){}}]);
//# sourceMappingURL=chunk-45f34bd6.6f040b3a.js.map